# ThreadManager

Работа программы проверена на компиляторах: 

	g++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609

	g++.exe (tdm-1) 4.9.2

В качестве неправильной работы потока принят вызов им исключения.


Структура проекта:

	MasterExcecute

		Exec.h - контейнер для функций (используется для управления с терминала)

	MemoryManager

		Memory.h - из-за частых вызовов оператора копирования и конструктора копии в программе активно используется динамическая память. Чтобы за ней пристально не следить реализовал менеджер динамической памяти, который сам при надобности очисти память

	ProcessManager

		Manager.cpp - реализация некоторых функций

		MultiThreadOut.h - класс для многопоточного ввода/вывода.

		Process.h - класс запускаемого потока. Он же перезапускает поток, если произошло исключение

		ProcessInformation.h - базовая информация о потоке (его имя, id)

		ProcessManager.h - клас управления потоками. Он создает поток и отдает его Process.h, который его выполняет. Также этот клас позволяет ожидать поток и сам завершает потоки, которые завершились добровольно, либо в которых очень много ошибок, что все попытки запустить приводят к ошибке

		sys.h - системный файл, в котором указана только одна дериктива компилятора "LINUX", означающая, что мы работаем в среде Linux. Эта директива предоставляет нам возможность по своему желанию уничтожить поток во время его работы. Однако для реализации использовались средства POSIX.

	SaveResult

		SaveResult.h - расширение над ProcessManager/Process.h, позволяющее запустить N раз одну функцию и все ее возвращаемые результаты записать в контейнер

ConsoleFunction.cpp - примеры использования данного менеджера

ConsoleFunction.h - объявление примеров и глобальных переменных

Sys.h и Sys.cpp - объявление и реализация некоторых системных функций.



Пример использования:

#include "ProcessManager/ProcessManager.h" - подключение менеджера потоков

Proces_MNG::ProcessManager mng; - создание менеджера

//пример запуска потока под именем ps, выводящий список запущенных потоков

mng.runingWithName([](){

	console<<mng;

},"ps"); 

//пример использования сохранения результатов

#include "SaveResult/SaveResult.h"

	int a=-100;

	int h=20;

	//создаем функцию для потока, считающую сумму

	//первый параметр - менеджер потоков. Также перегружена версия функции без него.

	auto s=SaveResultThread::getSave(mng,[&a,h] (){

		int aa=(a+=h);

		int res=0;

		for (int i=aa-h;i<aa;i++){

			res+=i;

			std::this_thread::sleep_for(std::chrono::milliseconds(10));

		}

		return res;

	//запускаем функцию 10 раз

	},10);

	//запускаем

	s.run();

	//ждем завершения

	s.weit();

	//получаем результат

	auto x=s.Result();

Пример компиляции под Linux
	
	1) переходим в папку проекта

	2)g++ -o run -std=c++11 -pthread main.cpp Sys.cpp ConsoleFunction.cpp ProcessManager/Manager.cpp
		
